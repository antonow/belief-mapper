<h1>Discussion Board</h1>
<p class="lead">Use this page to leave some feedback, suggest a belief that you didn't see, discuss definitions, or write anything else.</p>

<hr><br>


<div class="row">
  <div class="col-md-7">
  <%= form_for @comment, url: comments_path, :html => { method: :post, :class => "form-inline centered" } do |f| %>

    <div class="field form-group">
      <% f.label :body %>
      <%= f.text_area :body, :size => "85%", placeholder: "Leave a comment...", :class => "form-control", hide_label: true %>
    </div>



    <div class="actions form-group">
      <%= f.submit "Submit", :class => "btn btn-primary" %>
    </div>
  <% end %>

  <br>
  <% if @comments.nil? %>
    <p class="lead">No comments to display yet.</p>
  <% else %>
    <% @comments.each do |comment| %>
    <h4><%= comment.title %></h4>
    <div class="pull-right"><%=raw "posted in " + link_to(comment.tags.first.name, belief_path(comment.tags.first.name))  unless comment.tags.first.nil?%><br>
      <%= button_to 'delete', comment_path(comment), method: "delete", :class=> "pull-right pull-down btn-sm btn btn-danger", data: { confirm: "Confirm please" } if comment.user == current_user %></div>
    <p><%= comment.user.username %></p>
    <p><%=simple_format comment.body %></p>
      <% unless @comments.last == comment %>
        <hr>
      <% end %>
    <% end %>
  <% end %>
  </div>
  <div class="col-md-5"><br>
    <div class="col-md-6">
    <h4>Most Recent Tags</h4>
    <ol>
      <% ActsAsTaggableOn::Tagging.all.order('created_at DESC').map(&:tag_id).uniq.each do |tag_id| %>
        <% belief_name = ActsAsTaggableOn::Tag.find(tag_id).name %>
        <li><%= link_to belief_name, belief_path(belief_name) %></li>
      <% end %>
    </ol>
    </div>
    <div class="col-md-6">
    <h4>Most Popular Tags</h4>
    <ol>
      <% ActsAsTaggableOn::Tag.most_used.each do |tag| %>
        <li><%= link_to tag.name, belief_path(tag.name) %></li>
      <% end %>
    </ol>
    </div>
    <div class="col-md-12">
    <br>
    <hr>
    <br>
    <h5 class="centered">How Tagging Works</h5><br>
    <ul>
    <p>Adding the name of any belief to a comment will automatically give it the corresponding tag.</p>
    <p>Posting a comment on a belief-specific page will also automatically tag it appropriately.</p>
    </ul>
    </div>
  </div>
</div>